<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>VigilGuard Blog</title>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />
        <style>
            /* Reset and Base Styles */
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: "Poppins", sans-serif;
                background: #000;
                color: #fff;
                overflow-x: hidden;
                min-height: 100vh;
            }

            p {
                font-size: 1rem;
                margin-bottom: 15px;
                line-height: 1.6;
            }

            a {
                text-decoration: none;
                color: inherit;
            }

            /* Blog Container Styles */
            .container {
                width: 100%;
                min-height: 100vh;
                position: relative;
                overflow-x: hidden;
                padding: 80px 20px 120px;
                background-color: #222;
                width: 90%;
                margin: auto;
            }

            /* Blog Content */
            #blog-content {
                max-width: 800px;
                margin: 0 auto;
                min-height: 60vh;
                overflow-y: auto;
                max-height: calc(100vh - 160px); /* Account for header and footer */
                scrollbar-width: thin; /* For Firefox */
                scrollbar-color: rgba(255, 255, 255, 0.3) rgba(0, 0, 0, 0.1); /* For Firefox */
                padding-right: 10px; /* Prevent content from touching scrollbar */
            }

            /* Scrollbar styling for Chrome, Safari, and Edge */
            #blog-content::-webkit-scrollbar {
                width: 8px;
            }

            #blog-content::-webkit-scrollbar-track {
                background: rgba(0, 0, 0, 0.1);
                border-radius: 4px;
            }

            #blog-content::-webkit-scrollbar-thumb {
                background-color: rgba(255, 255, 255, 0.3);
                border-radius: 4px;
            }

            #blog-content::-webkit-scrollbar-thumb:hover {
                background-color: rgba(255, 255, 255, 0.5);
            }

            /* Navigation Controls */
            .navigation-controls {
                position: fixed;
                bottom: 70px;
                left: 0;
                width: 100%;
                display: flex;
                justify-content: center;
                gap: 20px;
                padding: 10px;
                z-index: 50;
            }

            .nav-button {
                background-color: rgba(255, 255, 255, 0.2);
                color: white;
                border: none;
                border-radius: 50%;
                width: 40px;
                height: 40px;
                display: flex;
                justify-content: center;
                align-items: center;
                cursor: pointer;
                transition: all 0.3s ease;
                margin-bottom: 5px;
            }

            .nav-button:hover:not(:disabled) {
                background-color: rgba(255, 255, 255, 0.3);
            }

            .nav-button:disabled {
                opacity: 0.3;
                cursor: not-allowed;
            }

            .nav-button svg {
                width: 24px;
                height: 24px;
                fill: white;
            }

            /* Footer Styles */
            #footer {
                position: fixed;
                bottom: 0;
                width: 100%;
                padding: 15px;
                text-align: center;
                font-size: 0.9rem;
                background-color: rgba(0, 0, 0, 0.8);
                backdrop-filter: blur(5px);
                z-index: 90;
            }

            /* Header Styles */
            header {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                padding: 15px;
                background-color: rgba(0, 0, 0, 0.8);
                backdrop-filter: blur(5px);
                z-index: 100;
                text-align: center;
            }

            .brand {
                font-size: 24px;
                font-weight: 700;
                color: #fff;
            }

            .footer-links {
                margin-top: 10px;
            }

            .footer-links a {
                margin: 0 10px;
                cursor: pointer;
                font-size: 0.8rem;
                opacity: 0.8;
            }

            .footer-links a:hover {
                opacity: 1;
            }

            /* Loading Spinner */
            .loader {
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 50px;
                height: 50px;
                border: 5px solid rgba(255, 255, 255, 0.3);
                border-radius: 50%;
                border-top: 5px solid #fff;
                animation: spin 1s linear infinite;
                z-index: 1000;
                display: none;
            }

            @keyframes spin {
                0% {
                    transform: translate(-50%, -50%) rotate(0deg);
                }
                100% {
                    transform: translate(-50%, -50%) rotate(360deg);
                }
            }

            /* Modal Styles */
            .modal {
                display: none;
                position: fixed;
                z-index: 1002;
                left: 0;
                top: 0;
                width: 100%;
                height: 100%;
                overflow: auto;
                background-color: rgba(0, 0, 0, 0.7);
            }

            .modal-content {
                background-color: #222;
                color: #fff;
                margin: 10% auto;
                padding: 20px;
                border: 1px solid #444;
                border-radius: 8px;
                width: 90%;
                max-width: 600px;
                position: relative;
            }

            @media (max-width: 768px) {
                .modal-content {
                    margin: 20% auto;
                    width: 95%;
                    padding: 15px;
                }
            }

            .close {
                position: absolute;
                right: 15px;
                top: 10px;
                color: #aaa;
                font-size: 28px;
                font-weight: bold;
                cursor: pointer;
                transition: all 0.2s ease;
            }

            .close:hover {
                color: #fff;
            }
        </style>
    </head>
    <body>
        <div class="loader" id="loader"></div>

        <header>
            <div class="brand">VigilGuard Blog</div>
        </header>

        <div class="container">
            <div id="blog-content">
                <!-- Blog content will be loaded here -->
                <p>Loading blog content...</p>
            </div>
        </div>

        <div class="navigation-controls">
            <button id="prev-button" class="nav-button" disabled>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M15 18l-6-6 6-6"></path>
                </svg>
            </button>
            <button id="next-button" class="nav-button" disabled>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M9 6l6 6-6 6"></path>
                </svg>
            </button>
        </div>

        <div id="footer">
            <!-- Date will be displayed here -->
            <div class="footer-links">
                <a href="#" onclick="openModal('privacy')">Privacy Policy</a>
                <a href="#" onclick="openModal('contact')">Copyright Notice</a>
            </div>
        </div>

        <!-- Modal windows -->
        <div id="privacyModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal('privacy')">&times;</span>
                <h3>Privacy Policy</h3>
                <br />
                <p>
                    We respect your privacy and do not collect personal information through cookies or similar
                    technologies.
                </p>
                <p>
                    This website functions without the need to track or store information about your browsing activity.
                </p>
            </div>
        </div>

        <div id="contactModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal('contact')">&times;</span>
                <h3>Copyright Notice</h3>
                <br />
                <p>Â© 2025 VigilGuard.com. All rights reserved.</p>
                <p>
                    All content on this website, including text, graphics, logos, and images, is the property of
                    VigilGuard.com and is protected by copyright laws. Unauthorized use of any materials on this website
                    may violate copyright, trademark, and other laws.
                </p>
                <p>
                    My statements and opinions on this website are entirely my own and do not represent those of
                    Synopsys, Inc. I am fully and solely responsible for the statements and content contained herein, as
                    well as the operation of this website, unless otherwise indicated. This website is unaffiliated with
                    Synopsys, Inc.
                </p>
            </div>
        </div>

        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const blogContainer = document.getElementById("blog-content");
                const footer = document.getElementById("footer");
                const prevButton = document.getElementById("prev-button");
                const nextButton = document.getElementById("next-button");
                const loader = document.getElementById("loader");
                let currentIndex = 0;
                let blogFiles = [];
                let touchStartX = 0;
                let touchEndX = 0;

                // Show loader while loading
                loader.style.display = "block";

                // Fetch the list of blog files from the JSON file
                fetch("blog-files.json")
                    .then((response) => response.json())
                    .then((data) => {
                        console.log("Fetched blog files:", data); // Debug log
                        blogFiles = data;
                        // Load the most recent blog on page load
                        loadBlog(blogFiles.length - 1);
                    })
                    .catch((error) => {
                        console.error("Error fetching blog files:", error);
                        blogContainer.innerHTML = "<p>Error loading blog content. Please try again later.</p>";
                        loader.style.display = "none";
                    });

                function loadBlog(index) {
                    // Check if index is out of bounds
                    if (index < 0 || index >= blogFiles.length) {
                        console.log("Attempted to load out-of-bounds index:", index);
                        return;
                    }

                    // Show loader
                    loader.style.display = "block";

                    console.log("Loading blog:", blogFiles[index]); // Debug log
                    fetch(blogFiles[index])
                        .then((response) => {
                            if (!response.ok) {
                                throw new Error(`HTTP error! Status: ${response.status}`);
                            }
                            return response.text();
                        })
                        .then((data) => {
                            blogContainer.innerHTML = data;
                            currentIndex = index;
                            console.log("Current index:", currentIndex); // Debug log

                            // Enable/disable navigation buttons
                            prevButton.disabled = currentIndex === 0;
                            nextButton.disabled = currentIndex === blogFiles.length - 1;

                            // Extract and display the date from the filename
                            const dateMatch = blogFiles[index].match(/(\d{4}-\d{2}-\d{2})/);
                            let dateText = "";

                            if (dateMatch && dateMatch[0]) {
                                const date = new Date(dateMatch[0]);
                                dateText = date.toLocaleDateString("en-US", {
                                    year: "numeric",
                                    month: "long",
                                    day: "numeric"
                                });
                            }

                            footer.innerHTML = `
                            <div class="footer-links">
                                    <div><a href="#"">Date: ${dateText}</a></div>
                                <a href="#" onclick="openModal('privacy')">Privacy Policy</a>
                                <a href="#" onclick="openModal('contact')">Copyright Notice</a>
                            </div>
                        `;

                            // Hide loader
                            loader.style.display = "none";
                        })
                        .catch((error) => {
                            console.error("Error loading blog:", error);
                            // Stay at current index instead of updating it
                            console.log("Staying at current index:", currentIndex);
                            blogContainer.innerHTML =
                                "<p>This article is currently unavailable. Please try another.</p>";
                            loader.style.display = "none";
                        });
                }

                function handleScroll(event) {
                    // If the user is scrolling within the blog content, let default scrolling happen
                    const contentElement = document.getElementById("blog-content");
                    const isScrollable = contentElement.scrollHeight > contentElement.clientHeight;
                    const isAtTop = contentElement.scrollTop === 0;
                    const isAtBottom =
                        contentElement.scrollTop + contentElement.clientHeight >= contentElement.scrollHeight - 5;

                    // If content is scrollable and we're not at the edges, allow normal scrolling
                    if (isScrollable && !((event.deltaY < 0 && isAtTop) || (event.deltaY > 0 && isAtBottom))) {
                        return; // Allow default scrolling behavior
                    }

                    // Otherwise handle navigation
                    event.preventDefault();

                    console.log("Navigation scroll event detected:", event.deltaY); // Debug log

                    if (event.deltaY > 0 && currentIndex < blogFiles.length - 1 && isAtBottom) {
                        // Scroll down to next article - only if at bottom of current article
                        console.log("Navigating to next article"); // Debug log
                        loadBlog(currentIndex + 1);
                    } else if (event.deltaY < 0 && currentIndex > 0 && isAtTop) {
                        // Scroll up to previous article - only if at top of current article
                        console.log("Navigating to previous article"); // Debug log
                        loadBlog(currentIndex - 1);
                    }
                }

                function handleTouchStart(event) {
                    touchStartX = event.touches[0].clientX;
                }

                function handleTouchEnd(event) {
                    touchEndX = event.changedTouches[0].clientX;
                    const swipeDistance = Math.abs(touchEndX - touchStartX);

                    // Only process swipe if it's a significant motion (prevents accidental swipes)
                    if (swipeDistance > 30) {
                        if (touchEndX < touchStartX && currentIndex < blogFiles.length - 1) {
                            // Swipe left - next blog, only if available
                            console.log("Swiped left"); // Debug log
                            loadBlog(currentIndex + 1);
                        } else if (touchEndX > touchStartX && currentIndex > 0) {
                            // Swipe right - previous blog, only if available
                            console.log("Swiped right"); // Debug log
                            loadBlog(currentIndex - 1);
                        }
                    }
                }

                prevButton.addEventListener("click", () => loadBlog(currentIndex - 1));
                nextButton.addEventListener("click", () => loadBlog(currentIndex + 1));

                // Attach scroll event for desktop
                blogContainer.addEventListener("wheel", handleScroll, { passive: false });

                // Attach touch events for mobile
                blogContainer.addEventListener("touchstart", handleTouchStart, { passive: true });
                blogContainer.addEventListener("touchend", handleTouchEnd, { passive: true });
            });

            // Modal functionality
            function openModal(type) {
                document.getElementById(type + "Modal").style.display = "block";
            }

            function closeModal(type) {
                document.getElementById(type + "Modal").style.display = "none";
            }

            // Close modal when clicking outside of it
            window.onclick = function (event) {
                if (event.target.classList.contains("modal")) {
                    event.target.style.display = "none";
                }
            };
        </script>
    </body>
</html>
